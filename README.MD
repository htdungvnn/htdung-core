# ğŸ›¡ï¸ Auth Platform â€“ Rust gRPC + Next.js (SSR)

A **production-ready authentication & authorization platform** built with **Rust**, **gRPC**, **PostgreSQL**, and **Next.js (SSR)**.  
Designed for **high performance**, **type safety**, and **containerized deployment**.

---

## âœ¨ Features

- ğŸ” Authentication & Authorization service (Register / Login / Validate Token)
- ğŸš€ gRPC-only backend (no REST)
- ğŸ¦€ Rust + Tonic (high-performance async server)
- ğŸ—„ PostgreSQL with SQLx
- ğŸ”‘ JWT-based auth (HttpOnly cookies)
- ğŸŒ Next.js (TypeScript) client with **SSR**
- ğŸ³ Fully containerized with Docker & Docker Compose
- ğŸ¤– CI/CD pipeline (Docker image build & publish)
- ğŸ“¦ Production-ready project structure

---

## ğŸ—ï¸ Architecture Overview
```bash

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        gRPC      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 
â”‚ Next.js    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚ Auth Service â”‚
â”‚ (SSR)      â”‚                  â”‚  Rust + Tonicâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚ PostgreSQL â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Frontend communicates with backend via **gRPC**
- SSR authentication using **secure HttpOnly cookies**
- Auth service is **stateless** (JWT)

---

## ğŸ“‚ Project Structure
```
htdung-core/
â”œâ”€â”€ auth-service/
â”‚   â”œâ”€â”€ proto/                  # gRPC proto definitions
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ auth/               # JWT & password logic
â”‚   â”‚   â”œâ”€â”€ db/                 # SQLx repositories
â”‚   â”‚   â”œâ”€â”€ grpc/               # gRPC service implementation
â”‚   â”‚   â”œâ”€â”€ error.rs            # Domain errors â†’ gRPC Status
â”‚   â”‚   â”œâ”€â”€ state.rs            # Shared application state
â”‚   â”‚   â””â”€â”€ main.rs
â”‚   â”œâ”€â”€ build.rs                # gRPC code generation
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ web-client/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ api/auth/           # gRPC â†’ HTTP bridge
â”‚   â”‚   â””â”€â”€ dashboard.tsx
â”‚   â”œâ”€â”€ lib/                    # gRPC client & auth helpers
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .github/workflows/           # CI/CD pipelines
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```
---

## ğŸ§° Tech Stack

### Backend
- Rust
- Tonic (gRPC)
- Tokio
- SQLx (PostgreSQL)
- JSON Web Tokens (JWT)
- Argon2 password hashing

### Frontend
- Next.js
- TypeScript
- Server-Side Rendering (SSR)
- gRPC client (`@grpc/grpc-js`)

### Infrastructure
- Docker & Docker Compose
- GitHub Actions (CI/CD)
- Docker Hub registry

---

## ğŸš€ Getting Started

### Prerequisites
- Docker
- Docker Compose
- Docker Hub account (for pulling images)

---

### Pull & Run Services

```bash
docker login
docker compose pull
docker compose up -d
```
### Verify Services
```bash
docker compose ps
docker compose logs auth-service
docker compose logs web-client
```
	â€¢	Web client: http://localhost:3000
	â€¢	gRPC auth service: localhost:50051

â¸»

### ğŸ” Authentication Flow
	1.	User registers or logs in via Next.js
	2.	Next.js API routes call the gRPC auth-service
	3.	Auth-service generates JWT
	4.	JWT stored in HttpOnly cookie
	5.	SSR validates token on every request
	6.	User info available server-side

â¸»

### ğŸ§ª gRPC API
```code
service AuthService {
  rpc Register (RegisterRequest) returns (AuthResponse);
  rpc Login (LoginRequest) returns (AuthResponse);
  rpc ValidateToken (ValidateTokenRequest) returns (ValidateTokenResponse);
}
```


â¸»

### ğŸ³ Docker & CI/CD
	â€¢	Multi-stage Docker builds
	â€¢	protoc installed in builder stage
	â€¢	CI pipeline:
	â€¢	Builds Docker images
	â€¢	Pushes to Docker Hub
	â€¢	Tags with latest and commit SHA

### Update deployment:
```
docker compose pull
docker compose up -d
```

â¸»

### ğŸ”’ Security
	â€¢	Passwords hashed with Argon2
	â€¢	JWT stored as HttpOnly cookies
	â€¢	No token access from client JavaScript
	â€¢	gRPC-only backend (reduced attack surface)
	â€¢	Ready for RBAC and mTLS

â¸»

### ğŸ“Œ Roadmap
	â€¢	Refresh tokens
	â€¢	Role-based access control (RBAC)
	â€¢	gRPC health checks & reflection
	â€¢	Observability (Tracing, Prometheus)
	â€¢	Kubernetes manifests
	â€¢	mTLS between services

â¸»

ğŸ Status
```
âœ… Fully working
âœ… CI/CD enabled
âœ… Docker-ready
âœ… Production-grade SSR authentication